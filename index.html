<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Wikipedia scraper using Beautiful Soup JS</title>
  <meta name="author" content="maligndrome">

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
	It is claimed that almost every wikipedia article ultimately leads to the page 'Philosophy'. Lets verify this!
	We shall do this for 1000 random pages and compute the number of FLCs (First link clicks) it takes to reach the page 'Philosophy'! :D
	<input id="wikipedia-link" type="text" />
	<button onclick="scrapeData();">Scrape Data!</button>
	<div id="contents"></div>
	<div id="img"></div>
	<div id="contents"></div>
	<div id="references"></div>
	<script src="jQuery-2.1.4.min.js"></script>
	<script src="beautiful-soup.js"></script>
	<script>
	var article;
		scrapeData = function() {
			article=new beautifulSoup('https://en.wikipedia.org/wiki/Physics');
			article.onReady('pre-process', function(content){
				//replace brackets with some wrapper and bracket, to avoid getting them as first links!
				// var regex = /"[^"]+"|(\()/g;
				// content = content.replace(regex, function(m, group1) {
				//     if (!group1) return m;
				//     else return '<div class="bracketed">';
				// });
				// var regex2 = /"[^"]+"|(\))/g;
				// content = content.replace(regex, function(m, group1) {
				//     if (!group1) return m;
				//     else return '</div>';
				// });
				content=content.replace(/\(/g,'<div>');
				content=content.replace(/\)/g,'</div>');	
				return content;
			}).then(function(){
				article.onReady('findAll',['title','p>a']).then(function(results){
					console.log("First paragraphs:",results[0][0].children[0].self.innerContent);
					console.log("First paragraphs:",results[1]);
				});
			});
			
		};
	</script>
</body>
</html>
