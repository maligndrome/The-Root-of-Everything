<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Wikipedia scraper using Beautiful Soup JS</title>
  <meta name="author" content="maligndrome">

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
	It is claimed that almost every wikipedia article ultimately leads to the page 'Philosophy'. Lets verify this!
	We shall do this for 1000 random pages and compute the number of FLCs (First link clicks) it takes to reach the page 'Philosophy'! :D
	<input id="wikipedia-link" type="text" />
	<button onclick="scrapeData('https://en.wikipedia.org/wiki/Physics');">Scrape Data!</button>
	<div id="contents"></div>
	<div id="img"></div>
	<div id="contents"></div>
	<div id="references"></div>
	<script src="jQuery-2.1.4.min.js"></script>
	<script src="beautiful-soup.js"></script>
	<script>
	var level=0;
		scrapeData = function(link) {
			var article=new beautifulSoup(link);
			article.onReady('pre-process', function(content){
				content=content.replace(/\(/g,'<span>');
				content=content.replace(/\)/g,'</span>');	
				return content;
			}).then(function(){
				article.onReady('findAll',['title','p>a']).then(function(results){
					var title=results[0][0].children[0].self.innerContent;
					if(title=='Philosophy - Wikipedia, the free encyclopedia'){
						console.log('found at level', level);
					} else {
						level++;
						nextArticle=results[1][0].self.href;
						nextArticle=nextArticle.replace('<span>','(');
						nextArticle=nextArticle.replace('</span>',')');
						console.log(nextArticle);
						scrapeData('https://en.wikipedia.org'+nextArticle);
					}
					
				});
			});
			
		};
	</script>
</body>
</html>
